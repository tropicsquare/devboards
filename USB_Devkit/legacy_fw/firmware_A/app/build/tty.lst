ARM GAS  /tmp/ccQ0oG4y.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 4
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"tty.c"
  12              		.text
  13              		.section	.text._usb_send_data,"ax",%progbits
  14              		.align	1
  15              		.arch armv7-m
  16              		.syntax unified
  17              		.thumb
  18              		.thumb_func
  19              		.fpu softvfp
  21              	_usb_send_data:
  22              		@ args = 0, pretend = 0, frame = 0
  23              		@ frame_needed = 0, uses_anonymous_args = 0
  24 0000 70B5     		push	{r4, r5, r6, lr}
  25 0002 0446     		mov	r4, r0
  26 0004 0D46     		mov	r5, r1
  27 0006 FFF7FEFF 		bl	usb_device_connected
  28 000a A8B9     		cbnz	r0, .L7
  29              	.L1:
  30 000c 70BD     		pop	{r4, r5, r6, pc}
  31              	.L4:
  32 000e 013E     		subs	r6, r6, #1
  33 0010 FCD0     		beq	.L1
  34 0012 FFF7FEFF 		bl	time_delay_ms
  35              	.L2:
  36 0016 2946     		mov	r1, r5
  37 0018 2046     		mov	r0, r4
  38 001a FFF7FEFF 		bl	usbd_cdc_tx
  39 001e 0128     		cmp	r0, #1
  40 0020 F5D0     		beq	.L4
  41 0022 0A24     		movs	r4, #10
  42              	.L5:
  43 0024 FFF7FEFF 		bl	usbd_cdc_tx_busy
  44 0028 0028     		cmp	r0, #0
  45 002a EFD0     		beq	.L1
  46 002c 013C     		subs	r4, r4, #1
  47 002e EDD0     		beq	.L1
  48 0030 0120     		movs	r0, #1
  49 0032 FFF7FEFF 		bl	time_delay_ms
  50 0036 F5E7     		b	.L5
  51              	.L7:
  52 0038 6426     		movs	r6, #100
  53 003a ECE7     		b	.L2
  55              		.section	.text._write,"ax",%progbits
  56              		.align	1
  57              		.global	_write
  58              		.syntax unified
  59              		.thumb
ARM GAS  /tmp/ccQ0oG4y.s 			page 2


  60              		.thumb_func
  61              		.fpu softvfp
  63              	_write:
  64              		@ args = 0, pretend = 0, frame = 0
  65              		@ frame_needed = 0, uses_anonymous_args = 0
  66 0000 10B5     		push	{r4, lr}
  67 0002 1446     		mov	r4, r2
  68 0004 0846     		mov	r0, r1
  69 0006 91B2     		uxth	r1, r2
  70 0008 FFF7FEFF 		bl	_usb_send_data
  71 000c 601C     		adds	r0, r4, #1
  72 000e 10BD     		pop	{r4, pc}
  74              		.section	.text._read,"ax",%progbits
  75              		.align	1
  76              		.global	_read
  77              		.syntax unified
  78              		.thumb
  79              		.thumb_func
  80              		.fpu softvfp
  82              	_read:
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85              		@ link register save eliminated.
  86 0000 0020     		movs	r0, #0
  87 0002 7047     		bx	lr
  89              		.section	.text._usb_getchar,"ax",%progbits
  90              		.align	1
  91              		.global	_usb_getchar
  92              		.syntax unified
  93              		.thumb
  94              		.thumb_func
  95              		.fpu softvfp
  97              	_usb_getchar:
  98              		@ args = 0, pretend = 0, frame = 0
  99              		@ frame_needed = 0, uses_anonymous_args = 0
 100              		@ link register save eliminated.
 101 0000 084A     		ldr	r2, .L20
 102 0002 0949     		ldr	r1, .L20+4
 103 0004 1368     		ldr	r3, [r2]
 104 0006 0968     		ldr	r1, [r1]
 105 0008 9942     		cmp	r1, r3
 106 000a 08D0     		beq	.L19
 107 000c 0133     		adds	r3, r3, #1
 108 000e B3F5805F 		cmp	r3, #4096
 109 0012 28BF     		it	cs
 110 0014 0023     		movcs	r3, #0
 111 0016 1360     		str	r3, [r2]
 112 0018 044A     		ldr	r2, .L20+8
 113 001a D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 114 001c 7047     		bx	lr
 115              	.L19:
 116 001e 4FF0FF30 		mov	r0, #-1
 117 0022 7047     		bx	lr
 118              	.L21:
 119              		.align	2
 120              	.L20:
 121 0024 00000000 		.word	.LANCHOR0
ARM GAS  /tmp/ccQ0oG4y.s 			page 3


 122 0028 00000000 		.word	.LANCHOR1
 123 002c 00000000 		.word	_usb_stream_buffer
 125              		.section	.text._rx_feed,"ax",%progbits
 126              		.align	1
 127              		.global	_rx_feed
 128              		.syntax unified
 129              		.thumb
 130              		.thumb_func
 131              		.fpu softvfp
 133              	_rx_feed:
 134              		@ args = 0, pretend = 0, frame = 0
 135              		@ frame_needed = 0, uses_anonymous_args = 0
 136 0000 0D29     		cmp	r1, #13
 137 0002 10B5     		push	{r4, lr}
 138 0004 0446     		mov	r4, r0
 139 0006 0CD0     		beq	.L28
 140 0008 0A29     		cmp	r1, #10
 141 000a 08BF     		it	eq
 142 000c 0021     		moveq	r1, #0
 143              	.L23:
 144 000e D4F80034 		ldr	r3, [r4, #1024]
 145 0012 0829     		cmp	r1, #8
 146 0014 E154     		strb	r1, [r4, r3]
 147 0016 06D1     		bne	.L24
 148 0018 13B1     		cbz	r3, .L22
 149 001a 013B     		subs	r3, r3, #1
 150              	.L38:
 151 001c C4F80034 		str	r3, [r4, #1024]
 152              	.L22:
 153 0020 10BD     		pop	{r4, pc}
 154              	.L28:
 155 0022 0021     		movs	r1, #0
 156 0024 F3E7     		b	.L23
 157              	.L24:
 158 0026 41B9     		cbnz	r1, .L26
 159 0028 002B     		cmp	r3, #0
 160 002a F9D0     		beq	.L22
 161 002c 064B     		ldr	r3, .L39
 162 002e 1B68     		ldr	r3, [r3]
 163 0030 0BB1     		cbz	r3, .L27
 164 0032 2046     		mov	r0, r4
 165 0034 9847     		blx	r3
 166              	.L27:
 167 0036 0023     		movs	r3, #0
 168 0038 F0E7     		b	.L38
 169              	.L26:
 170 003a 40F2FE32 		movw	r2, #1022
 171 003e 9342     		cmp	r3, r2
 172 0040 EED8     		bhi	.L22
 173 0042 0133     		adds	r3, r3, #1
 174 0044 EAE7     		b	.L38
 175              	.L40:
 176 0046 00BF     		.align	2
 177              	.L39:
 178 0048 00000000 		.word	.LANCHOR2
 180              		.section	.text.tty_rx_task,"ax",%progbits
 181              		.align	1
ARM GAS  /tmp/ccQ0oG4y.s 			page 4


 182              		.global	tty_rx_task
 183              		.syntax unified
 184              		.thumb
 185              		.thumb_func
 186              		.fpu softvfp
 188              	tty_rx_task:
 189              		@ args = 0, pretend = 0, frame = 0
 190              		@ frame_needed = 0, uses_anonymous_args = 0
 191 0000 10B5     		push	{r4, lr}
 192 0002 054C     		ldr	r4, .L44
 193              	.L42:
 194 0004 FFF7FEFF 		bl	_usb_getchar
 195 0008 011E     		subs	r1, r0, #0
 196 000a 00DA     		bge	.L43
 197 000c 10BD     		pop	{r4, pc}
 198              	.L43:
 199 000e 2046     		mov	r0, r4
 200 0010 C9B2     		uxtb	r1, r1
 201 0012 FFF7FEFF 		bl	_rx_feed
 202 0016 F5E7     		b	.L42
 203              	.L45:
 204              		.align	2
 205              	.L44:
 206 0018 00000000 		.word	.LANCHOR3
 208              		.section	.text.tty_put_binary,"ax",%progbits
 209              		.align	1
 210              		.global	tty_put_binary
 211              		.syntax unified
 212              		.thumb
 213              		.thumb_func
 214              		.fpu softvfp
 216              	tty_put_binary:
 217              		@ args = 0, pretend = 0, frame = 0
 218              		@ frame_needed = 0, uses_anonymous_args = 0
 219              		@ link register save eliminated.
 220 0000 89B2     		uxth	r1, r1
 221 0002 FFF7FEBF 		b	_usb_send_data
 223              		.section	.text.tty_put_text,"ax",%progbits
 224              		.align	1
 225              		.global	tty_put_text
 226              		.syntax unified
 227              		.thumb
 228              		.thumb_func
 229              		.fpu softvfp
 231              	tty_put_text:
 232              		@ args = 0, pretend = 0, frame = 0
 233              		@ frame_needed = 0, uses_anonymous_args = 0
 234 0000 10B5     		push	{r4, lr}
 235 0002 0446     		mov	r4, r0
 236 0004 FFF7FEFF 		bl	strlen
 237 0008 81B2     		uxth	r1, r0
 238 000a 2046     		mov	r0, r4
 239 000c FFF7FEFF 		bl	_usb_send_data
 240 0010 013C     		subs	r4, r4, #1
 241              	.L48:
 242 0012 14F8013F 		ldrb	r3, [r4, #1]!	@ zero_extendqisi2
 243 0016 002B     		cmp	r3, #0
ARM GAS  /tmp/ccQ0oG4y.s 			page 5


 244 0018 FBD1     		bne	.L48
 245 001a 10BD     		pop	{r4, pc}
 247              		.section	.rodata._usb_rx_handler.str1.1,"aMS",%progbits,1
 248              	.LC0:
 249 0000 4552524F 		.ascii	"ERROR: USB RX overflow !\015\012\000"
 249      523A2055 
 249      53422052 
 249      58206F76 
 249      6572666C 
 250              		.section	.text._usb_rx_handler,"ax",%progbits
 251              		.align	1
 252              		.syntax unified
 253              		.thumb
 254              		.thumb_func
 255              		.fpu softvfp
 257              	_usb_rx_handler:
 258              		@ args = 0, pretend = 0, frame = 0
 259              		@ frame_needed = 0, uses_anonymous_args = 0
 260              		@ link register save eliminated.
 261 0000 70B4     		push	{r4, r5, r6}
 262 0002 0D4A     		ldr	r2, .L55
 263 0004 0D4C     		ldr	r4, .L55+4
 264 0006 1368     		ldr	r3, [r2]
 265 0008 2468     		ldr	r4, [r4]
 266 000a 0D4D     		ldr	r5, .L55+8
 267 000c 0144     		add	r1, r1, r0
 268              	.L51:
 269 000e 8842     		cmp	r0, r1
 270 0010 02D1     		bne	.L54
 271 0012 1360     		str	r3, [r2]
 272 0014 70BC     		pop	{r4, r5, r6}
 273 0016 7047     		bx	lr
 274              	.L54:
 275 0018 0133     		adds	r3, r3, #1
 276 001a B3F5805F 		cmp	r3, #4096
 277 001e 28BF     		it	cs
 278 0020 0023     		movcs	r3, #0
 279 0022 9C42     		cmp	r4, r3
 280 0024 03D1     		bne	.L53
 281 0026 0748     		ldr	r0, .L55+12
 282 0028 70BC     		pop	{r4, r5, r6}
 283 002a FFF7FEBF 		b	tty_put_text
 284              	.L53:
 285 002e 10F8016B 		ldrb	r6, [r0], #1	@ zero_extendqisi2
 286 0032 EE54     		strb	r6, [r5, r3]
 287 0034 EBE7     		b	.L51
 288              	.L56:
 289 0036 00BF     		.align	2
 290              	.L55:
 291 0038 00000000 		.word	.LANCHOR1
 292 003c 00000000 		.word	.LANCHOR0
 293 0040 00000000 		.word	_usb_stream_buffer
 294 0044 00000000 		.word	.LC0
 296              		.section	.text.tty_init,"ax",%progbits
 297              		.align	1
 298              		.global	tty_init
 299              		.syntax unified
ARM GAS  /tmp/ccQ0oG4y.s 			page 6


 300              		.thumb
 301              		.thumb_func
 302              		.fpu softvfp
 304              	tty_init:
 305              		@ args = 0, pretend = 0, frame = 0
 306              		@ frame_needed = 0, uses_anonymous_args = 0
 307 0000 08B5     		push	{r3, lr}
 308 0002 034B     		ldr	r3, .L58
 309 0004 1860     		str	r0, [r3]
 310 0006 0348     		ldr	r0, .L58+4
 311 0008 FFF7FEFF 		bl	usbd_cdc_rx_init
 312 000c 0120     		movs	r0, #1
 313 000e 08BD     		pop	{r3, pc}
 314              	.L59:
 315              		.align	2
 316              	.L58:
 317 0010 00000000 		.word	.LANCHOR2
 318 0014 00000000 		.word	_usb_rx_handler
 320              		.global	_rx_callback
 321              		.section	.bss._rx_callback,"aw",%nobits
 322              		.align	2
 323              		.set	.LANCHOR2,. + 0
 326              	_rx_callback:
 327 0000 00000000 		.space	4
 328              		.section	.bss._usb_stream_buffer,"aw",%nobits
 331              	_usb_stream_buffer:
 332 0000 00000000 		.space	4096
 332      00000000 
 332      00000000 
 332      00000000 
 332      00000000 
 333              		.section	.bss._usb_stream_rd_ptr,"aw",%nobits
 334              		.align	2
 335              		.set	.LANCHOR0,. + 0
 338              	_usb_stream_rd_ptr:
 339 0000 00000000 		.space	4
 340              		.section	.bss._usb_stream_wr_ptr,"aw",%nobits
 341              		.align	2
 342              		.set	.LANCHOR1,. + 0
 345              	_usb_stream_wr_ptr:
 346 0000 00000000 		.space	4
 347              		.section	.bss.usb_rx_buf.1,"aw",%nobits
 348              		.align	2
 349              		.set	.LANCHOR3,. + 0
 352              	usb_rx_buf.1:
 353 0000 00000000 		.space	1028
 353      00000000 
 353      00000000 
 353      00000000 
 353      00000000 
 354              		.ident	"GCC: (15:10.3-2021.07-4) 10.3.1 20210621 (release)"
ARM GAS  /tmp/ccQ0oG4y.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 tty.c
     /tmp/ccQ0oG4y.s:14     .text._usb_send_data:0000000000000000 $t
     /tmp/ccQ0oG4y.s:21     .text._usb_send_data:0000000000000000 _usb_send_data
     /tmp/ccQ0oG4y.s:56     .text._write:0000000000000000 $t
     /tmp/ccQ0oG4y.s:63     .text._write:0000000000000000 _write
     /tmp/ccQ0oG4y.s:75     .text._read:0000000000000000 $t
     /tmp/ccQ0oG4y.s:82     .text._read:0000000000000000 _read
     /tmp/ccQ0oG4y.s:90     .text._usb_getchar:0000000000000000 $t
     /tmp/ccQ0oG4y.s:97     .text._usb_getchar:0000000000000000 _usb_getchar
     /tmp/ccQ0oG4y.s:121    .text._usb_getchar:0000000000000024 $d
     /tmp/ccQ0oG4y.s:331    .bss._usb_stream_buffer:0000000000000000 _usb_stream_buffer
     /tmp/ccQ0oG4y.s:126    .text._rx_feed:0000000000000000 $t
     /tmp/ccQ0oG4y.s:133    .text._rx_feed:0000000000000000 _rx_feed
     /tmp/ccQ0oG4y.s:178    .text._rx_feed:0000000000000048 $d
     /tmp/ccQ0oG4y.s:181    .text.tty_rx_task:0000000000000000 $t
     /tmp/ccQ0oG4y.s:188    .text.tty_rx_task:0000000000000000 tty_rx_task
     /tmp/ccQ0oG4y.s:206    .text.tty_rx_task:0000000000000018 $d
     /tmp/ccQ0oG4y.s:209    .text.tty_put_binary:0000000000000000 $t
     /tmp/ccQ0oG4y.s:216    .text.tty_put_binary:0000000000000000 tty_put_binary
     /tmp/ccQ0oG4y.s:224    .text.tty_put_text:0000000000000000 $t
     /tmp/ccQ0oG4y.s:231    .text.tty_put_text:0000000000000000 tty_put_text
     /tmp/ccQ0oG4y.s:251    .text._usb_rx_handler:0000000000000000 $t
     /tmp/ccQ0oG4y.s:257    .text._usb_rx_handler:0000000000000000 _usb_rx_handler
     /tmp/ccQ0oG4y.s:291    .text._usb_rx_handler:0000000000000038 $d
     /tmp/ccQ0oG4y.s:297    .text.tty_init:0000000000000000 $t
     /tmp/ccQ0oG4y.s:304    .text.tty_init:0000000000000000 tty_init
     /tmp/ccQ0oG4y.s:317    .text.tty_init:0000000000000010 $d
     /tmp/ccQ0oG4y.s:326    .bss._rx_callback:0000000000000000 _rx_callback
     /tmp/ccQ0oG4y.s:322    .bss._rx_callback:0000000000000000 $d
     /tmp/ccQ0oG4y.s:332    .bss._usb_stream_buffer:0000000000000000 $d
     /tmp/ccQ0oG4y.s:334    .bss._usb_stream_rd_ptr:0000000000000000 $d
     /tmp/ccQ0oG4y.s:338    .bss._usb_stream_rd_ptr:0000000000000000 _usb_stream_rd_ptr
     /tmp/ccQ0oG4y.s:341    .bss._usb_stream_wr_ptr:0000000000000000 $d
     /tmp/ccQ0oG4y.s:345    .bss._usb_stream_wr_ptr:0000000000000000 _usb_stream_wr_ptr
     /tmp/ccQ0oG4y.s:348    .bss.usb_rx_buf.1:0000000000000000 $d
     /tmp/ccQ0oG4y.s:352    .bss.usb_rx_buf.1:0000000000000000 usb_rx_buf.1

UNDEFINED SYMBOLS
usb_device_connected
time_delay_ms
usbd_cdc_tx
usbd_cdc_tx_busy
strlen
usbd_cdc_rx_init
